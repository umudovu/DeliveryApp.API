@model  HeaderVM

@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    string imgPath = "./img/user.png";
    var controllerName =ViewContext.RouteData.Values["controller"].ToString().ToLower();
    var actionName =ViewContext.RouteData.Values["Action"].ToString().ToLower();
}


<div class="col-md-4 pt-3">
<div class="osahan-cart-item rounded rounded shadow-sm overflow-hidden bg-white sticky_sidebar">
<div class="d-flex border-bottom osahan-cart-item-profile bg-white p-3">
            @if (User.Identity.IsAuthenticated)
            {
                <img alt="" src="@Model.Customer.ImageUrl==null?@imgPath:@Model.Customer.ImageUrl   "
                    style="width:50px ;" class="mr-3 rounded-circle img-fluid">
                <div class="d-flex flex-column">
                <h6 class="mb-1 font-weight-bold">@Model.Customer.Name @Model.Customer.SurName</h6>
                 <p class="mb-0 small text-muted"><i class="feather-map-pin">@Model.Customer.Address</i> </p>
                </div>
            }
            else
            {
                <div style="color: #424242; height:100%;" class="d-flex justify-content-center">
                    You have not an account 
                </div>
            }
        </div>
 <div id="itemsChart" style="height: 220px;overflow:hidden; overflow-y: scroll;" class=" bg-white border-bottom py-2">

    @if (Model.BasketVM.Count == 0)
    {
        <div class="d-flex justify-content-center align-items-center h-100">
            <div class="d-flex justify-content-center align-items-center text-center h-100 " style="color: #424242; height:100% ">
                You have not a purchase
            </div>
        </div>
    }
    @foreach (var item in Model.BasketVM)
       {
            <div class="gold-members d-flex align-items-center justify-content-between px-3 py-2 border-bottom">
            <div class="media align-items-center col-8">
            <div data-id="@item.Id" style="cursor: pointer;" class="mr-2 text-danger removeCart">&middot;</div>
            <div class="media-body">
            <p class="m-0">@item.Name</p>
            </div>
            </div>
            <div class="d-flex align-items-center  col-4 justify-content-between">
            <span class="count-number float-right d-flex align-items-start justify-content-start">
                <button data-id="@item.Id" type="button" class="btn-sm left dec btn btn-outline-secondary minusCart"> <i class="feather-minus"></i> </button>
                <input class="count-number-input" type="text" readonly="" value="@item.BasketCount">
                <button data-id="@item.Id" type="button" class="btn-sm right inc btn btn-outline-secondary addCart "> <i class="feather-plus"></i> </button>
            </span>
            <p class="text-gray mb-0 float-right ml-2 text-muted small d-flex align-items-end">
                $<span id="productPrice">@item.Price</span>
            </p>
            </div>
            </div>
       }
        </div>

<div class="bg-white p-3 py-1 border-bottom clearfix">
<div class="input-group-sm mb-1 input-group">
<input placeholder="Enter promo code" type="text" class="form-control">
<div class="input-group-append"><button type="button" class="btn btn-primary"><i class="feather-percent"></i> APPLY</button></div>
</div>
</div>

<div class="bg-white p-3 clearfix border-bottom">
<p class="mb-1">Item Total <span class="float-right text-dark" >$<span id="totalItem">@ViewBag.SubTotal</span></span></p>
@*<p class="mb-1">Restaurant Charges <span class="float-right text-dark" >$<span></span id="restCharges">62.8</span></p>*@
@*<p class="mb-1">Delivery Fee<span class="text-info ml-1"><i class="feather-info"></i></span>*@
       @* <span class="float-right text-dark">$<span id="deliveryFee">0.00</span></span></p>*@

@*<h6 class="font-weight-bold mb-0">TO PAY <span class="float-right">$<span id="totalDiscount">@ViewBag.SubTotal</span></span></h6>*@
</div>
        @if (actionName != "checkout")
        {
                    <div class="p-3">
<a class="btn btn-success btn-block btn-lg" 
    asp-controller="order" asp-action="checkout"
>PAY $<span id="toPay">@ViewBag.SubTotal</span><i class="feather-arrow-right"></i></a>
</div>
        }


</div>
</div>



